#!/usr/bin/env bash

set -eo pipefail

if [[ "${BUILDKITE_PLUGIN_TAP_CI_UTILS_DEBUG:-false}" =~ (true|on|1) ]]; then
	echo "~~~ :hammer: Enabling debug mode"
	set -x
fi

# Echo to standard error
function log {
	echo "$@" 1>&2
}

# Checks if an AWS parameter with that name exists
# Requires ssm:GetParameter permission
function param_exists() {
	local param_name="${1?Parameter name is not set}"
	aws ssm get-parameter --name "${param_name}" --query "Parameter.Name" --output text >/dev/null 2>&1
}

parameter_name=${1?Parameter name is not set}
param_exists "${parameter_name}"
